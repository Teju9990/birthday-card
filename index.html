<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Happy Birthday ğŸ‰</title>

<style>
  body {
    margin: 0;
    font-family: 'Comic Sans MS', cursive;
    background: linear-gradient(to bottom, #ffd1dc, #fff);
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100dvh;
    overflow: hidden;
  }

  /* ğŸ OPEN CARD */
  .card {
    width: 260px;
    height: 170px;
    background: #ff4d6d;
    color: white;
    border-radius: 20px;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 1.2rem;
    animation: pulse 1.5s infinite;
    box-shadow: 0 10px 25px rgba(0,0,0,0.2);
    cursor: pointer;
    z-index: 3;
  }

  @keyframes pulse {
    50% { transform: scale(1.05); }
  }

  /* ğŸ’Œ MESSAGE BOX (FIXED SIZE) */
  .message {
    display: none;
    background: white;
    width: 90%;
    max-width: 380px;
    height: 320px;            /* ğŸ”’ FIXED HEIGHT */
    padding: 18px;
    border-radius: 20px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.15);
    color: #111;
    line-height: 1.6;
    z-index: 3;
    display: flex;
    flex-direction: column;
  }

  h1 {
    color: #ff2e63;
    text-align: center;
    font-size: 1.4rem;
    margin: 5px 0;
  }

  .cake-symbol {
    text-align: center;
    font-size: 2rem;
    margin-bottom: 8px;
  }

  /* ğŸ“œ SCROLLING MESSAGE AREA */
  #textMessage {
    flex: 1;
    overflow-y: auto;
    padding-right: 6px;
    font-size: 0.95rem;
  }

  #textMessage p {
    margin-bottom: 12px;
  }

  /* ğŸ† REAL FIREWORKS */
  .firework {
    position: fixed;
    width: 6px;
    height: 6px;
    border-radius: 50%;
    pointer-events: none;
    animation: firework 1.2s ease-out forwards;
    z-index: 1;
  }

  @keyframes firework {
    to {
      transform: translate(var(--x), var(--y));
      opacity: 0;
    }
  }

  /* ğŸŠ CONFETTI */
  .confetti {
    position: fixed;
    width: 8px;
    height: 8px;
    animation: confetti 1.8s ease-out forwards;
    pointer-events: none;
    z-index: 1;
  }

  @keyframes confetti {
    to {
      transform: translate(var(--cx), var(--cy)) rotate(720deg);
      opacity: 0;
    }
  }
</style>
</head>

<body>

<!-- ğŸµ MUSIC -->
<audio id="bgMusic" loop>
  <source src="music.mp3" type="audio/mpeg">
</audio>

<div class="card" onclick="openCard()">ğŸ Tap to Open ğŸ‰</div>

<div class="message" id="message">
  <h1>Happy Birthday ğŸ‚</h1>
  <div class="cake-symbol">ğŸ‚</div>
  <div id="textMessage"></div>
</div>

<script>
let opened = false;
const music = document.getElementById("bgMusic");

/* â³ Typing speed */
const TYPE_SPEED = 55;
const LINE_DELAY = 1200;

const lines = [
  "This past year has been beautiful, and itâ€™s all because of you. Youâ€™ve made me stronger, braver, and happier just by being in my life.",
  "I love the moments we play games together, sing our favorite songs, and even the quiet times. No matter what, Iâ€™ll always be here for you.",
  "I wish you a birthday filled with happiness, success, love, and everything your heart deserves. Happy Birthday ğŸ’«ğŸ’™"
];

/* âœï¸ TYPE + AUTO SCROLL */
function showMessage() {
  const box = document.getElementById("textMessage");
  let i = 0;

  function nextLine() {
    if (i >= lines.length) return;
    const p = document.createElement("p");
    box.appendChild(p);
    let j = 0;

    function typeChar() {
      if (j < lines[i].length) {
        p.textContent += lines[i][j++];
        box.scrollTop = box.scrollHeight;   // ğŸ”½ auto scroll
        setTimeout(typeChar, TYPE_SPEED);
      } else {
        i++;
        setTimeout(nextLine, LINE_DELAY);
      }
    }
    typeChar();
  }
  nextLine();
}

/* ğŸŠ CONFETTI POPPERS */
function poppers() {
  const colors = ["#ff4d6d","#ffd166","#06d6a0","#4cc9f0","#c77dff"];
  for (let i = 0; i < 60; i++) {
    const c = document.createElement("div");
    c.className = "confetti";
    c.style.background = colors[Math.floor(Math.random()*colors.length)];
    c.style.left = "50%";
    c.style.top = "50%";
    c.style.setProperty("--cx", (Math.random()*400-200)+"px");
    c.style.setProperty("--cy", (Math.random()*400-200)+"px");
    document.body.appendChild(c);
    setTimeout(()=>c.remove(),2000);
  }
}

/* ğŸ† REAL CIRCULAR FIREWORKS */
function fireworks() {
  const colors = ["#ff4d6d","#ffd166","#06d6a0","#4cc9f0","#ffffff"];
  const cx = Math.random()*window.innerWidth;
  const cy = Math.random()*window.innerHeight*0.6;

  for (let i = 0; i < 36; i++) {
    const angle = (i / 36) * Math.PI * 2;
    const f = document.createElement("div");
    f.className = "firework";
    f.style.background = colors[Math.floor(Math.random()*colors.length)];
    f.style.left = cx + "px";
    f.style.top = cy + "px";
    f.style.setProperty("--x", Math.cos(angle)*180 + "px");
    f.style.setProperty("--y", Math.sin(angle)*180 + "px");
    document.body.appendChild(f);
    setTimeout(()=>f.remove(),1300);
  }
}

/* ğŸ‰ OPEN CARD */
function openCard() {
  if (opened) return;
  opened = true;

  music.volume = 0.6;
  music.play().catch(()=>{});

  poppers();
  fireworks();

  document.querySelector(".card").style.display = "none";
  document.getElementById("message").style.display = "flex";

  showMessage();
}
</script>

</body>
</html>
